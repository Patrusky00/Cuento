        <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>La Aventura MÃ¡gica de Darek y Conan</title>
  <meta name="description" content="Cuento interactivo con voz, ilustraciones y decisiones mÃ¡gicas de Darek y Conan."/>
  <meta name="theme-color" content="#7e22ce"/>

  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      font-family:'Comic Sans MS',cursive,sans-serif;
      background:linear-gradient(135deg,#1e3c72 0%,#2a5298 50%,#7e22ce 100%);
      min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;
    }
    .book-container{
      background:#fff;border-radius:30px;max-width:900px;width:100%;
      padding:50px;box-shadow:0 25px 70px rgba(0,0,0,0.4);
      position:relative;overflow:hidden;animation:fadeIn .6s ease-in;
    }
    @keyframes fadeIn{from{opacity:0;transform:scale(.95);}to{opacity:1;transform:scale(1);}}
    .snow-top{position:absolute;top:0;left:0;right:0;height:30px;
      background:linear-gradient(180deg,white 0%,transparent 100%);border-radius:30px 30px 0 0;}
    .title{text-align:center;color:#dc2626;font-size:3em;margin-bottom:15px;text-shadow:3px 3px 6px rgba(0,0,0,0.2);}
    .subtitle{text-align:center;color:#15803d;font-size:1.6em;margin-bottom:20px;font-weight:bold;}
    .page-counter{text-align:center;font-size:1.3em;color:#7c3aed;margin-bottom:25px;font-weight:bold;}
    .illustration{
      width:100%;height:380px;border-radius:25px;margin:25px 0;display:flex;
      flex-direction:column;align-items:center;justify-content:center;font-size:120px;
      position:relative;overflow:hidden;box-shadow:inset 0 0 60px rgba(0,0,0,0.4);
      border:5px solid #fbbf24;background:linear-gradient(180deg,#0c4a6e 0%,#075985 50%,#0284c7 100%);
    }
    .illustration.night{background:linear-gradient(180deg,#0f172a 0%,#1e293b 50%,#334155 100%);}
    .illustration.morning{background:linear-gradient(180deg,#fef3c7 0%,#fde68a 50%,#fcd34d 100%);}
    .illustration.magic{background:linear-gradient(135deg,#a855f7 0%,#ec4899 50%,#f59e0b 100%);}
    .illustration.snow{background:linear-gradient(180deg,#e0f2fe 0%,#bae6fd 50%,#7dd3fc 100%);}
    .illustration.workshop{background:linear-gradient(180deg,#dc2626 0%,#ef4444 50%,#f87171 100%);}
    .stars-decoration{position:absolute;top:15px;left:15px;font-size:35px;animation:twinkle 2s infinite;}
    .stars-decoration.right{left:auto;right:15px;}
    @keyframes twinkle{0%,100%{opacity:1;transform:scale(1);}50%{opacity:.6;transform:scale(1.1);}}
    .illustration-content{z-index:2;text-align:center;line-height:1.3;}
    .story-text{font-size:1.6em;line-height:2;color:#1f2937;margin:35px 0;text-align:center;font-weight:500;}
    .highlight{color:#dc2626;font-weight:bold;}
    .magic-word{color:#7c3aed;font-weight:bold;}
    .navigation{display:flex;gap:20px;margin-top:40px;justify-content:center;}
    .nav-btn{
      padding:25px 50px;font-size:1.4em;font-weight:bold;border:none;border-radius:20px;
      cursor:pointer;transition:all .3s;font-family:'Comic Sans MS',cursive;
      box-shadow:0 6px 12px rgba(0,0,0,.2);min-width:200px;
    }
    .nav-btn.next{background:linear-gradient(135deg,#dc2626 0%,#ef4444 100%);color:#fff;}
    .nav-btn.prev{background:linear-gradient(135deg,#0284c7 0%,#0ea5e9 100%);color:#fff;}
    .nav-btn:hover:not(:disabled){transform:translateY(-5px) scale(1.05);}
    .nav-btn:disabled{opacity:.5;cursor:not-allowed;}
    .choices{display:flex;flex-direction:column;gap:20px;margin-top:40px;max-width:600px;margin-left:auto;margin-right:auto;}
    .choice-btn{
      padding:30px;font-size:1.5em;font-weight:bold;border:none;border-radius:20px;cursor:pointer;
      transition:all .3s;font-family:'Comic Sans MS',cursive;color:#fff;
    }
    .choice-btn:nth-child(1){background:linear-gradient(135deg,#f59e0b 0%,#f97316 100%);}
    .choice-btn:nth-child(2){background:linear-gradient(135deg,#10b981 0%,#059669 100%);}
    .audio-controls{text-align:center;margin:25px 0;}
    .audio-btn{
      background:linear-gradient(135deg,#15803d 0%,#16a34a 100%);color:#fff;border:none;
      padding:20px 50px;font-size:1.3em;border-radius:50px;cursor:pointer;font-weight:bold;
      display:inline-flex;align-items:center;gap:12px;transition:all .3s;
    }
    .audio-btn:hover{transform:scale(1.08);}
    @media(max-width:600px){
      .title{font-size:2em;}
      .story-text{font-size:1.4em;}
      .illustration{height:280px;font-size:80px;}
      .nav-btn{padding:20px 30px;font-size:1.2em;min-width:150px;}
    }
  </style>
</head>
<body>
  <div class="book-container">
    <div class="snow-top"></div>
    <h1 class="title">ğŸ„ La Aventura MÃ¡gica ğŸ„</h1>
    <h2 class="subtitle">de <span class="highlight">Darek</span> y <span class="highlight">Conan</span></h2>

    <div class="audio-controls">
      <button id="audio-btn" class="audio-btn">ğŸ”Š Escuchar la historia</button>
    </div>

    <div class="page-counter" id="page-counter"></div>
    <div id="story-container"></div>
  </div>

  <script>
    let currentPage=1,chosenPath=null;

    const pages={
      1:{illustration:"ğŸ <br>ğŸŒ™âœ¨",class:"night",text:`Era Nochebuena y <span class='highlight'>Darek</span> miraba por la ventana con su perrito <span class='highlight'>Conan</span>. Las estrellas brillaban en el cielo oscuro.`},
      2:{illustration:"ğŸ„<br>ğŸ’«ğŸ",class:"magic",text:`<span class='highlight'>Darek</span> pensaba en todos sus amigos del cole nuevo y en la magia de la Navidad.`},
      3:{illustration:"âœ¨<br>ğŸ•ğŸ’›",class:"magic",text:`De repente, <span class='highlight'>Conan</span> comenzÃ³ a ladrar. Algo <span class='magic-word'>mÃ¡gico</span> estaba pasando...`},
      4:{illustration:"ğŸš—<br>âœ¨ğŸŒŸ",class:"magic",text:`Â¡Los coches Hot Wheels de <span class='highlight'>Darek</span> empezaron a <span class='magic-word'>brillar</span> con luz dorada!`},
      5:{illustration:"ğŸï¸ğŸ’¨<br>ğŸ•",class:"night",text:`Un cochecito rojo volÃ³ hacia Ã©l y una voz dijo: â€œÂ¡Sube! Hay una <span class='magic-word'>misiÃ³n especial</span> para ti esta Navidad.â€`},
      6:{illustration:"ğŸŒˆ<br>â˜ï¸âœ¨",class:"morning",text:`Subieron al coche mÃ¡gico. Â¡Comenzaron a volar por el cielo!`},
      7:{illustration:"ğŸ…<br>ğŸ˜¢â„ï¸",class:"snow",text:`Llegaron al Polo Norte. PapÃ¡ Noel estaba preocupado. â€œÂ¡Se han <span class='magic-word'>perdido</span> los cascabeles mÃ¡gicos!â€<br><br>Â¿QuÃ© harÃ¡ Darek?`,hasChoice:true}
    };

    const pathA={
      8:{illustration:"ğŸ”<br>â„ï¸ğŸ•",class:"snow",text:`<span class='highlight'>Darek</span> decidiÃ³ buscar los cascabeles con <span class='highlight'>Conan</span>.`},
      9:{illustration:"ğŸ»â€â„ï¸<br>ğŸµğŸ””",class:"snow",text:`Encontraron un osito polar que sabÃ­a dÃ³nde estaban.`},
      10:{illustration:"ğŸ”ï¸<br>âœ¨ğŸ””",class:"snow",text:`En una cueva de hielo hallaron los cascabeles <span class='magic-word'>brillando</span> como estrellas.`},
      11:{illustration:"ğŸ””<br>ğŸ¶ğŸ’«",class:"magic",text:`Los cascabeles sonaban â€œÂ¡TilÃ­n, tilÃ­n!â€`},
      12:{illustration:"ğŸ¦Œ<br>ğŸ””âœ¨",class:"workshop",text:`Los renos recuperaron la <span class='magic-word'>magia</span>.`},
      13:{illustration:"ğŸ…<br>ğŸ˜ŠğŸ",class:"workshop",text:`â€œÂ¡Gracias, Darek!â€ dijo PapÃ¡ Noel. â€œEres muy <span class='magic-word'>valiente</span>.â€`},
      14:{illustration:"ğŸï¸<br>ğŸŒŸğŸ’¨",class:"night",text:`Le regalÃ³ un Hot Wheels que <span class='magic-word'>brillaba</span> en la oscuridad.`},
      15:{illustration:"ğŸ <br>â¤ï¸âœ¨",class:"magic",text:`<span class='highlight'>Darek</span> y <span class='highlight'>Conan</span> volvieron a casa felices.<br><br>ğŸ„ <span class='highlight'>FIN</span> ğŸ„`}
    };

    const pathB={
      8:{illustration:"ğŸ¨<br>ğŸ””âœ¨",class:"workshop",text:`<span class='highlight'>Darek</span> decidiÃ³ crear nuevos cascabeles mÃ¡gicos.`},
      9:{illustration:"ğŸ§<br>ğŸ¨ğŸ’›",class:"workshop",text:`Los duendes le ayudaron con pinturas y brillantina.`},
      10:{illustration:"âœ¨<br>ğŸ¨ğŸ””",class:"magic",text:`PintÃ³ cada cascabel de colores <span class='magic-word'>brillantes</span>.`},
      11:{illustration:"ğŸ’«<br>ğŸ””ğŸ¶",class:"magic",text:`Comenzaron a sonar â€œÂ¡TilÃ­n, tilÃ­n!â€ llenos de <span class='magic-word'>magia</span>.`},
      12:{illustration:"ğŸ¦Œ<br>ğŸ””âœ¨",class:"workshop",text:`Los renos volaron felices con los nuevos cascabeles.`},
      13:{illustration:"ğŸ…<br>ğŸ˜ŠğŸ",class:"workshop",text:`â€œÂ¡Eres un <span class='magic-word'>artista</span>, Darek!â€ dijo PapÃ¡ Noel.`},
      14:{illustration:"ğŸï¸<br>ğŸŒŸğŸ’¨",class:"night",text:`Le regalÃ³ un coche que cambiaba de color.`},
      15:{illustration:"ğŸ <br>â¤ï¸âœ¨",class:"magic",text:`<span class='highlight'>Darek</span> y <span class='highlight'>Conan</span> volvieron a casa. ğŸ„ <span class='highlight'>FIN</span> ğŸ„`}
    };

    function getPage(){
      return currentPage<=7?pages[currentPage]:(chosenPath==='A'?pathA[currentPage]:pathB[currentPage]);
    }

    function loadPage(){
      const p=getPage();const c=document.getElementById('story-container');
      c.style.opacity='0';
      setTimeout(()=>{
        let html=`<div class='illustration ${p.class}'>
          <div class='stars-decoration'>â­</div>
          <div class='stars-decoration right'>â­</div>
          <div class='illustration-content'>${p.illustration}</div>
        </div><div class='story-text'>${p.text}</div>`;
        if(p.hasChoice){
          html+=`<div class='choices'>
            <button class='choice-btn' onclick='choose(\"A\")'>ğŸ” Buscar los cascabeles perdidos</button>
            <button class='choice-btn' onclick='choose(\"B\")'>ğŸ¨ Hacer cascabeles nuevos</button>
          </div>`;
        }else{
          html+=`<div class='navigation'>
            <button class='nav-btn prev' onclick='prevPage()' ${currentPage===1?'disabled':''}>â¬…ï¸ AtrÃ¡s</button>
            <button class='nav-btn next' onclick='nextPage()'>${currentPage===15?'ğŸ”„ Reiniciar':'Siguiente â¡ï¸'}</button>
          </div>`;
        }
        c.innerHTML=html;
        document.getElementById('page-counter').textContent=`ğŸ“– PÃ¡gina ${currentPage} de 15`;
        c.style.opacity='1';
      },200);
    }

    function nextPage(){if(currentPage<15){currentPage++;}else{currentPage=1;chosenPath=null;}loadPage();}
    function prevPage(){if(currentPage>1){if(currentPage===8&&chosenPath)chosenPath=null;currentPage--;}loadPage();}
    function choose(p){chosenPath=p;currentPage=8;loadPage();}

    function playOrToggle(){
      if(!('speechSynthesis'in window)){alert('Tu dispositivo no puede leer la historia en voz alta.');return;}
      const s=window.speechSynthesis;
      if(s.speaking){s.cancel();document.getElementById('audio-btn').textContent='ğŸ”Š Escuchar la historia';return;}
      const t=document.createElement('div');t.innerHTML=getPage().text;
      const msg=new SpeechSynthesisUtterance(t.textContent);
      msg.lang='es-ES';msg.rate=0.9;msg.pitch=1.2;
      document.getElementById('audio-btn').textContent='ğŸ”Š Narrando...';
      msg.onend=()=>document.getElementById('audio-btn').textContent='ğŸ”Š Escuchar la historia';
      s.speak(msg);
    }

    document.addEventListener('DOMContentLoaded',()=>{
      loadPage();
      document.getElementById('audio-btn').addEventListener('click',playOrToggle);
    });
  </script>
</body>
        </html>
